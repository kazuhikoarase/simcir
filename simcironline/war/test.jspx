<?xml version="1.0" encoding="UTF-8" ?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:s="urn:jsptagdir:/WEB-INF/tags/s"
	xmlns="http://www.w3.org/1999/xhtml"
>
<jsp:directive.page import="java.util.HashMap"/>
<jsp:directive.page import="java.util.Map"/>
<jsp:directive.page import="java.util.Arrays"/>
	<jsp:directive.page import="java.util.Collections"/>
	<jsp:directive.page import="java.util.ArrayList"/>
	<jsp:directive.page import="java.util.List"/>
	<jsp:directive.page import="java.util.Enumeration"/>

	<jsp:directive.page contentType="text/html;charset=UTF-8" />
	<jsp:scriptlet><![CDATA[

Map<Object,Object> headers = new HashMap<Object,Object>();
Enumeration<?> names = request.getHeaderNames();
while (names.hasMoreElements() ) {
	String name = (String)names.nextElement();
	headers.put(name, request.getHeader(name) );
}

Object[] nameArray = headers.keySet().toArray();
Arrays.sort(nameArray);
pageContext.setAttribute("names", nameArray);
pageContext.setAttribute("headers", headers);
	]]></jsp:scriptlet>

	<html>
		<head>
			<title>Test</title>
		</head>
		<body>
			<table border="1">
				<c:forEach var="name" items="${names}">
					<tr>
						<td>
							<c:out value="${name}" />
						</td>
						<td>
							<c:out value="${headers[name]}" />
						</td>
					</tr>
				</c:forEach>
			</table>
		</body>
	</html>



</jsp:root>
